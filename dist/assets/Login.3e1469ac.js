import{u as x,a as C,T as p,_ as I}from"./persist.004879cf.js";import{Y as N,aj as R,N as c,b as U,al as B,bw as L,bx as g,bn as T,au as P,aw as z,ak as A,_ as F,$ as t,as as G,by as u,Z as W,c as a,a5 as _,a0 as d,aE as j,aa as E,a4 as H,bz as M,bA as O,bB as D,bC as J,bD as Y,a3 as f,a8 as Z}from"./index.ba35025e.js";import{V as $}from"./VContainer.98dd2dcc.js";import{V as q}from"./VForm.f9e2543b.js";import{a as K}from"./VOverlay.fc94e046.js";import"./VTextField.e0a45fee.js";import"./easing.6e2d7abd.js";import"./form.1cfcad77.js";import"./forwardRefs.2d67e586.js";const h=n=>(J("data-v-6dea6263"),n=n(),Y(),n),Q=h(()=>f("h3",{class:"form-head mb-3"},"Sign in",-1)),X=h(()=>f("span",{class:"my-2"},"or",-1)),ee=N({__name:"Login",setup(n){const v=R(),V=x(),S=C(),m=G(),r=c(""),l=c(""),y=c(localStorage.loading),b=U(()=>y.value=="true"),k=async()=>{localStorage.loading="true";const s=new g;M(u,s)};B(()=>{localStorage.loading=!1,L(u).then(s=>{const o=g.credentialFromResult(s),i=o==null?void 0:o.accessToken,e=s.user;T(P(z,"users",e.uid),{name:e.displayName,email:e.email,photo:e.photoURL}),V.setUser({id:e.uid,name:e.displayName,email:e.email,photo:e.photoURL,token:i}),localStorage.currentUser=JSON.stringify({id:e.uid,name:e.displayName,email:e.email,photo:e.photoURL}),S.setPersist(e)}).then(()=>{m.push({name:"Home"})}).catch(s=>{console.log(s.message)})});const w=()=>{O(u,r.value,l.value).then(()=>{m.push({name:"Home"})})};return A(()=>{v.hideNavBar(!0),localStorage.loading||(localStorage.loading=!1)}),(s,o)=>{const i=D("router-link");return W(),F($,{class:"container"},{default:t(()=>[a(q,{class:"form"},{default:t(()=>[Q,a(p,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),inputType:"email"},null,8,["modelValue"]),a(p,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value=e),inputType:"password"},null,8,["modelValue"]),a(_,{size:"large",variant:"flat",color:"primary",block:"",onClick:w},{default:t(()=>[d(" Sign in ")]),_:1}),X,a(_,{size:"large",variant:"outlined",block:"",onClick:k},{default:t(()=>[a(j,{src:I,width:"23",height:"23",class:"mr-3"}),d(" Sign in with Google ")]),_:1}),a(i,{class:"mt-3 text-decoration-none",to:"/signup"},{default:t(()=>[d("Create account")]),_:1})]),_:1}),a(K,{"model-value":H(b),class:"align-center justify-center"},{default:t(()=>[a(E,{size:"70",width:"5",color:"primary",indeterminate:""})]),_:1},8,["model-value"])]),_:1})}}});const ue=Z(ee,[["__scopeId","data-v-6dea6263"]]);export{ue as default};
