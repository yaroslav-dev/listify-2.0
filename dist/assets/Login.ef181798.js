import{u as L,T as b,_ as U}from"./user.5af24fd7.js";import{aq as B,aN as F,bb as R,bc as u,bd as T,N as f,aa as A,be as P,aO as W,as as z,at as t,ar as G,c as a,az as v,au as d,b3 as j,aU as q,bf as D,bg as E,aW as H,bh as M,bi as O,bj as J,bk as K,ax as S,aC as Q}from"./index.fc830b2a.js";import{V as X}from"./VContainer.bd62cc27.js";import{V as Y}from"./VForm.c00b9209.js";import"./VTextField.7115e2af.js";import"./easing.6e2d7abd.js";import"./form.2c6b9055.js";import"./forwardRefs.2d67e586.js";const V=n=>(J("data-v-891bb14e"),n=n(),K(),n),Z=V(()=>S("h3",{class:"form-head mb-3"},"Sign in",-1)),$=V(()=>S("span",{class:"my-2"},"or",-1)),ee=B({__name:"Login",setup(n){const y=F(),k=L(),p=R(),x=new u,m=q(),N=T(),r=f(""),i=f("");let _,g,l,h;A(()=>{const o=indexedDB.open("firebaseLocalStorageDb");o.onsuccess=()=>{_=o.result,g=_.transaction("firebaseLocalStorage"),l=g.objectStore("firebaseLocalStorage").getAll(),l.onsuccess=()=>{h=l.result.find(s=>s.value!=="1")}}});const w=P(),C=async()=>{D(p,x).then(o=>{const s=u.credentialFromResult(o);s==null||s.accessToken;const e=o.user;E(H(w,"users",e.uid),{name:e.displayName,email:e.email,photo:e.photoURL}),k.setUser({id:e.uid,name:e.displayName,email:e.email,photo:e.photoURL}),localStorage.currentUser=JSON.stringify({id:e.uid,name:e.displayName,email:e.email,photo:e.photoURL}),N.setPersist(h),m.push({name:"Home"})}).then(()=>{}).catch(o=>{const s=o.code;console.log(s),o.message,u.credentialFromError(o)})},I=()=>{M(p,r.value,i.value).then(o=>{console.log("Signed in with email"),console.log("data: ",o),m.push({name:"Home"})})};return W(()=>{y.hideNavBar(!0)}),(o,s)=>{const e=O("router-link");return G(),z(X,{class:"container"},{default:t(()=>[a(Y,{class:"form"},{default:t(()=>[Z,a(b,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),inputType:"email"},null,8,["modelValue"]),a(b,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=c=>i.value=c),inputType:"password"},null,8,["modelValue"]),a(v,{size:"large",variant:"flat",color:"primary",block:"",onClick:I},{default:t(()=>[d(" Sign in ")]),_:1}),$,a(v,{size:"large",variant:"outlined",block:"",onClick:C},{default:t(()=>[a(j,{src:U,width:"23",height:"23",class:"mr-3"}),d(" Sign in with Google ")]),_:1}),a(e,{class:"mt-3 text-decoration-none",to:"/signup"},{default:t(()=>[d("Create account")]),_:1})]),_:1})]),_:1})}}});const ce=Q(ee,[["__scopeId","data-v-891bb14e"]]);export{ce as default};
